$(document).ready(function(){window.detail_ajax_path="/bitrix/templates/dsklad/components/bitrix/catalog.element/catalog/ajax",$(document).on("click",".remove a",function(){var t={};return t.item_id=$(this).attr("data"),$.ajax({url:window.detail_ajax_path+"/del.php",dataType:"text",data:t,async:!1,type:"post",success:function(t){purepopup.closePopup(),$(".basket_area").load("/include_areas/small_basket.php")}}),!1}),$(document).on("click","#item-minus, #item-minus_big",function(){var t=parseInt($("#quantity").text()),a={};return 1==t?(a.item_id=$(this).attr("data"),$.ajax({url:window.detail_ajax_path+"/del.php",dataType:"text",data:a,async:!1,type:"post",success:function(t){closePopup(),$(".basket_area").load("/include_areas/small_basket.php")}})):t>1&&(a.item_id=$(this).attr("data"),a.operation="minus",$.ajax({url:window.detail_ajax_path+"/quantity.php",dataType:"json",data:a,async:!1,type:"post",success:function(t){"ok"==t.status&&($("#quantity").html(t.q),$("#total_price").html(t.tp),$("#quantity_big").val(t.q+" шт."),$(".basket_area").load("/include_areas/small_basket.php"))},error:function(t){$("body").html(t.responseText)}})),!1}),$(document).on("click","#item-plus, #item-plus_big",function(){var t={};return t.item_id=$(this).attr("data"),t.operation="plus",$.ajax({url:window.detail_ajax_path+"/quantity.php",dataType:"json",data:t,async:!1,type:"post",success:function(t){"ok"==t.status&&($("#quantity").html(t.q),$("#total_price").html(t.tp),$("#quantity_big").val(t.q+" шт."),$(".basket_area").load("/include_areas/small_basket.php"))},error:function(t){$("body").html(t.responseText)}}),!1}),$("#preorder-form").on("submit",function(t){t.preventDefault();var a=$(this);$.post("/ajax/preorder.php",a.serialize(),function(t){$(".success_popup_send_txt").removeClass("active"),$(".error_popup_send_txt").removeClass("active");try{t.status?(closePopup(),a[0].reset(),setTimeout(function(){$(".success_popup_send_txt").find(".desc_popup_send_txt").find("span").html("Благодарим за заявку. Ждите звонка!"),$(".success_popup_send_txt").addClass("active")},1e3),setTimeout(function(){$(".success_popup_send_txt").removeClass("active")},6e3)):(setTimeout(function(){$(".error_popup_send_txt").find(".desc_popup_send_txt").find("span").html("Ошибка сохранения данных!"),$(".error_popup_send_txt").addClass("active")},1e3),setTimeout(function(){$(".error_popup_send_txt").removeClass("active")},6e3))}catch(t){}},"json")})});